<!DOCTYPE html><html class="theme-next mist use-motion" lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><script src="/lib/pace/pace.min.js?v=1.0.2"></script><link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css"><link href="/css/main.css?v=6.2.0" rel="stylesheet" type="text/css"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.2.0"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.2.0"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png}?v=6.2.0"><link rel="mask-icon" href="/images/logo.svg?v=6.2.0" color="#222"><script type="text/javascript" id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Mist",version:"6.2.0",sidebar:{position:"left",display:"post",offset:12,b2t:!1,scrollpercent:!1,onmobile:!1},fancybox:!1,fastclick:!1,lazyload:!1,tabs:!0,motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><meta name="description" content="不想做鼓励师的前端狗不是好的程序猿"><meta property="og:type" content="website"><meta property="og:title" content="猫大叔"><meta property="og:url" content="https://21ido.com/page/31/index.html"><meta property="og:site_name" content="猫大叔"><meta property="og:description" content="不想做鼓励师的前端狗不是好的程序猿"><meta property="og:locale" content="zh-CN"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="猫大叔"><meta name="twitter:description" content="不想做鼓励师的前端狗不是好的程序猿"><link rel="alternate" href="../../atom.xml" title="猫大叔" type="application/atom+xml"><link rel="canonical" href="https://21ido.com/page/31/"><script type="text/javascript" id="page.configurations">CONFIG.page={sidebar:""}</script><title>猫大叔 - 关注前端，热爱生活</title><script async src="https://www.googletagmanager.com/gtag/js?id=UA-1162524-4"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-1162524-4")</script><noscript><style type="text/css">.sidebar-inner,.use-motion .brand,.use-motion .collection-title,.use-motion .comments,.use-motion .menu-item,.use-motion .motion-element,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .logo,.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.logo-line-after i{right:initial}</style></noscript></head><body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN"><div class="container sidebar-position-left page-home"><div class="headband"></div><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">猫大叔</span> <span class="logo-line-after"><i></i></span></a></div><h1 class="site-subtitle" itemprop="description">关注前端，热爱生活</h1></div><div class="site-nav-toggle"><button aria-label="切换导航栏"><span class="btn-bar"></span> <span class="btn-bar"></span> <span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br>首页</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i><br>分类<span class="badge">5</span></a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i><br>标签<span class="badge">378</span></a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br>归档<span class="badge">400</span></a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i><br>关于</a></li><li class="menu-item menu-item-search"><a href="javascript:;" class="popup-trigger"><i class="menu-item-icon fa fa-search fa-fw"></i><br>搜索</a></li></ul><div class="site-search"><div class="popup search-popup local-search-popup"><div class="local-search-header clearfix"><span class="search-icon"><i class="fa fa-search"></i> </span><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span><div class="local-search-input-wrapper"><input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input"></div></div><div id="local-search-result"></div></div></div></nav></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><section id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://21ido.com../../2006/03/3f28914c/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="猫大叔"><meta itemprop="description" content=""><meta itemprop="image" content="../../images/avatar.gif"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="猫大叔"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a class="post-title-link" href="../../2006/03/3f28914c/" itemprop="url">XUL学习笔记(4)</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2006-03-30 21:26:22" itemprop="dateCreated datePublished" datetime="2006-03-30T21:26:22+08:00">2006-03-30</time> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2018-05-18 09:54:52" itemprop="dateModified" datetime="2018-05-18T09:54:52+08:00">2018-05-18</time> </span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="../../categories/Web/" itemprop="url" rel="index"><span itemprop="name">Web</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><p>笔记就先写到这，今天起开始翻译XUL Planet的《XUL指南》，哈</p><h3 id="四、XUL常用元素"><a href="#四、XUL常用元素" class="headerlink" title="四、XUL常用元素"></a>四、XUL常用元素</h3><h4 id="4-1-创建窗体"><a href="#4-1-创建窗体" class="headerlink" title="4.1 创建窗体"></a>4.1 创建窗体</h4><p>当准备好开发工具之后，就可以开始写XUL了。先看一段XUL文件</p><div style="BORDER-RIGHT:#ccc 1px solid;PADDING-RIGHT:5px;BORDER-TOP:#ccc 1px solid;PADDING-LEFT:5px;BACKGROUND:#f3f3f3;PADDING-BOTTOM:5px;MARGIN:5px 20px;BORDER-LEFT:#ccc 1px solid;PADDING-TOP:5px;BORDER-BOTTOM:#ccc 1px solid">&lt;?xml version=”1.0” encoding=”GB2312”?&gt;<br>&lt;?xml-stylesheet href=””chrome://chrome/skin” type=”text/css”?&gt;<br>&lt;?xml-stylesheet href=””chrome://chrome/skin/contact.css” type=”text/css”?&gt;<br>&lt;window<br>id=”QQ_setup”<br>class=”sb_faceplate”<br>title=”QQ2006设置”<br>xmlns:html=”<a href="http://www.w3.org/1999/xhtml&quot;" target="_blank" rel="noopener">http://www.w3.org/1999/xhtml&quot;</a><br>xmlns=”<a href="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul&quot;" target="_blank" rel="noopener">http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul&quot;</a><br>&gt;</div><p>解释一下</p><h4 id="nbsp"><a href="#nbsp" class="headerlink" title="&nbsp;"></a>&nbsp;</h4><h4 id="4-2-按钮-lt-button-gt"><a href="#4-2-按钮-lt-button-gt" class="headerlink" title="4.2 按钮 &lt;button&gt;"></a>4.2 按钮 &lt;button&gt;</h4><div style="BORDER-RIGHT:#ccc 1px solid;PADDING-RIGHT:5px;BORDER-TOP:#ccc 1px solid;PADDING-LEFT:5px;BACKGROUND:#f3f3f3;PADDING-BOTTOM:5px;MARGIN:5px 20px;BORDER-LEFT:#ccc 1px solid;PADDING-TOP:5px;BORDER-BOTTOM:#ccc 1px solid">&lt;button id=”button” label=”Find” default=”true”/&gt;</div><p>按钮比较简单，label是显示的文字，如果有多种语言版本，就要在文件头载入DTD文件，然后用引用形式显示文字，后面将做介绍，default是布尔值，表示窗口打开时按回车所触发的按钮</p><h4 id="nbsp-1"><a href="#nbsp-1" class="headerlink" title="&nbsp;"></a>&nbsp;</h4><h4 id="4-3-文本标签-lt-label-gt-和-lt-description-gt"><a href="#4-3-文本标签-lt-label-gt-和-lt-description-gt" class="headerlink" title="4.3 文本标签&lt;label&gt;和&lt;description&gt;"></a>4.3 文本标签&lt;label&gt;和&lt;description&gt;</h4><div style="BORDER-RIGHT:#ccc 1px solid;PADDING-RIGHT:5px;BORDER-TOP:#ccc 1px solid;PADDING-LEFT:5px;BACKGROUND:#f3f3f3;PADDING-BOTTOM:5px;MARGIN:5px 20px;BORDER-LEFT:#ccc 1px solid;PADDING-TOP:5px;BORDER-BOTTOM:#ccc 1px solid">&lt;label value=” DisplayName “ class=”label”/&gt;</div><p>Value是显示文本，同时可以用class来为标签定义样式</p><div style="BORDER-RIGHT:#ccc 1px solid;PADDING-RIGHT:5px;BORDER-TOP:#ccc 1px solid;PADDING-LEFT:5px;BACKGROUND:#f3f3f3;PADDING-BOTTOM:5px;MARGIN:5px 20px;BORDER-LEFT:#ccc 1px solid;PADDING-TOP:5px;BORDER-BOTTOM:#ccc 1px solid">&lt;description value=” DisplayName “ class=”label”/&gt;</div><p>Description基本上跟label是相同的，比如上面2行代码显示效果是一样的，但description标签可以显示多行文字，例如</p><div style="BORDER-RIGHT:#ccc 1px solid;PADDING-RIGHT:5px;BORDER-TOP:#ccc 1px solid;PADDING-LEFT:5px;BACKGROUND:#f3f3f3;PADDING-BOTTOM:5px;MARGIN:5px 20px;BORDER-LEFT:#ccc 1px solid;PADDING-TOP:5px;BORDER-BOTTOM:#ccc 1px solid">&lt;description&gt;<br>This is a multi-line description.<br>It should wrap if there isn’t enough room to put it in one line.<br>Let’s put in another sentence for good measure.<br>&lt;/description&gt;</div><p>跟html一样，多个空格将被当成一个空格，回车和’\n’也是不起作用的，只有当文本宽度超过上级元素围的宽度了，才会换行，但是也可以用width属性来定义宽度，例如</p><div style="BORDER-RIGHT:#ccc 1px solid;PADDING-RIGHT:5px;BORDER-TOP:#ccc 1px solid;PADDING-LEFT:5px;BACKGROUND:#f3f3f3;PADDING-BOTTOM:5px;MARGIN:5px 20px;BORDER-LEFT:#ccc 1px solid;PADDING-TOP:5px;BORDER-BOTTOM:#ccc 1px solid">&lt;description style=”max-width:20px;”&gt;<br>This is a multi-line description.<br>It should wrap if there isn’t enough room to put it in one line.<br>Let’s put in another sentence for good measure.<br>&lt;/description&gt;</div><p>例外，文本标签可以使用control属性来跟按钮、输入框之类的元素绑定，下面代码点击label后会触发button，accesskey是快捷键，用Alt+D即可使该label为当前焦点</p><div style="BORDER-RIGHT:#ccc 1px solid;PADDING-RIGHT:5px;BORDER-TOP:#ccc 1px solid;PADDING-LEFT:5px;BACKGROUND:#f3f3f3;PADDING-BOTTOM:5px;MARGIN:5px 20px;BORDER-LEFT:#ccc 1px solid;PADDING-TOP:5px;BORDER-BOTTOM:#ccc 1px solid">&lt;label control=”DisplayName” value=” DisplayName “ accesskey=”d” class=”label”/&gt;<br>&lt;button id=” DisplayName “ label=”MyName”/&gt;</div><h4 id="nbsp-2"><a href="#nbsp-2" class="headerlink" title="&nbsp;"></a>&nbsp;</h4><h4 id="4-4-图片-lt-image-gt"><a href="#4-4-图片-lt-image-gt" class="headerlink" title="4.4 图片&lt;image&gt;"></a>4.4 图片&lt;image&gt;</h4><div style="BORDER-RIGHT:#ccc 1px solid;PADDING-RIGHT:5px;BORDER-TOP:#ccc 1px solid;PADDING-LEFT:5px;BACKGROUND:#f3f3f3;PADDING-BOTTOM:5px;MARGIN:5px 20px;BORDER-LEFT:#ccc 1px solid;PADDING-TOP:5px;BORDER-BOTTOM:#ccc 1px solid">&lt;image src=”snow.png” width=”20” height=”26”/&gt;</div><p>Image标签跟html一样，不过这不是常用的作法。常用的作法是放在skin目录下，通过样式表来控制。例如：</p><div style="BORDER-RIGHT:#ccc 1px solid;PADDING-RIGHT:5px;BORDER-TOP:#ccc 1px solid;PADDING-LEFT:5px;BACKGROUND:#f3f3f3;PADDING-BOTTOM:5px;MARGIN:5px 20px;BORDER-LEFT:#ccc 1px solid;PADDING-TOP:5px;BORDER-BOTTOM:#ccc 1px solid">&lt;image id=”snow” /&gt;<br>同时在CSS里面指定属性<br>#snow{<br>height: 20px;<br>width: 26px;<br>background-image: url(images/snow.gif);<br>}</div><p>当然，你也可以用这样显示图片，但我觉得这样并不灵活，有时会撑大图片，比较难控制</p><div style="BORDER-RIGHT:#ccc 1px solid;PADDING-RIGHT:5px;BORDER-TOP:#ccc 1px solid;PADDING-LEFT:5px;BACKGROUND:#f3f3f3;PADDING-BOTTOM:5px;MARGIN:5px 20px;BORDER-LEFT:#ccc 1px solid;PADDING-TOP:5px;BORDER-BOTTOM:#ccc 1px solid">#snow{<br>height: 20px;<br>width: 26px;<br>list-style-image: url(images/snow.gif);<br>}</div></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://21ido.com../../2006/03/7069078b/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="猫大叔"><meta itemprop="description" content=""><meta itemprop="image" content="../../images/avatar.gif"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="猫大叔"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a class="post-title-link" href="../../2006/03/7069078b/" itemprop="url">XUL学习笔记(3)</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2006-03-29 23:56:20" itemprop="dateCreated datePublished" datetime="2006-03-29T23:56:20+08:00">2006-03-29</time> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2018-05-18 09:54:46" itemprop="dateModified" datetime="2018-05-18T09:54:46+08:00">2018-05-18</time> </span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="../../categories/Web/" itemprop="url" rel="index"><span itemprop="name">Web</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><p>该节讲的是扩展开发的，代码很多，这里跳过，简单说一下就好了，哈</p><h3 id="三、目录和文件结构"><a href="#三、目录和文件结构" class="headerlink" title="三、目录和文件结构"></a>三、目录和文件结构</h3><h4 id="3-1-目录结构"><a href="#3-1-目录结构" class="headerlink" title="3.1 目录结构"></a>3.1 目录结构</h4><p>一个标准的扩展程序，解压后有几个目录</p><p>另外，有3个必备的特殊文件</p><p></p></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://21ido.com../../2006/03/b5dd839b/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="猫大叔"><meta itemprop="description" content=""><meta itemprop="image" content="../../images/avatar.gif"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="猫大叔"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a class="post-title-link" href="../../2006/03/b5dd839b/" itemprop="url">雨总会停的</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2006-03-27 00:24:43" itemprop="dateCreated datePublished" datetime="2006-03-27T00:24:43+08:00">2006-03-27</time> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2018-05-11 15:14:17" itemprop="dateModified" datetime="2018-05-11T15:14:17+08:00">2018-05-11</time> </span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="../../categories/Life/" itemprop="url" rel="index"><span itemprop="name">Life</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><p><img src="/images/2006/03/27_2006-3-327624827_12724.gif" alt=""></p><p>好久好久没玩游戏，刚好最近修了主板和内存，试一下《极品飞车》，1280的分辨率加效果全开，依然很流畅，玩了几局，基本都与后面拉开7－8秒，歇了这么就还能比之前有所进步，确实让我惊喜。</p><p>煤气用完了，开始洗冷水，有点冷，哈，洗完倒是挺精神的。左臂的伤还没好，不能运动倒是挺郁闷的。</p><p>上周工作很忙，有个项目五一前要出DEMO，估计下周要开始加班了。</p><p>爱生活，爱咖啡～～～</p></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://21ido.com../../2006/03/697236ca/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="猫大叔"><meta itemprop="description" content=""><meta itemprop="image" content="../../images/avatar.gif"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="猫大叔"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a class="post-title-link" href="../../2006/03/697236ca/" itemprop="url">XUL学习笔记(2)</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2006-03-23 22:20:59" itemprop="dateCreated datePublished" datetime="2006-03-23T22:20:59+08:00">2006-03-23</time> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2018-05-18 09:54:41" itemprop="dateModified" datetime="2018-05-18T09:54:41+08:00">2018-05-18</time> </span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="../../categories/Web/" itemprop="url" rel="index"><span itemprop="name">Web</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><h4 id="1-3-XUL可以做什么"><a href="#1-3-XUL可以做什么" class="headerlink" title="1.3 XUL可以做什么"></a>1.3 XUL可以做什么</h4><p>先补充一下，XUL发音为：zool<br>XUL可以创建图形界面的绝大多数元素，像Firefox、Thunderbird界面都是XUL的应用。</p><h4 id="1-4-XUL相关资料"><a href="#1-4-XUL相关资料" class="headerlink" title="1.4 XUL相关资料"></a>1.4 XUL相关资料</h4><p>目前XUL应用并不多，相关资料(无论中文或英文)非常的少，大多仅有一些简单的介绍而已，下面是几个相关网站<br><a href="http://www.xulplanet.com/" target="_blank" rel="noopener">http://www.xulplanet.com</a><br><a href="http://developer.mozilla.com/" target="_blank" rel="noopener">http://developer.mozilla.com</a></p><h3 id="二、开发平台"><a href="#二、开发平台" class="headerlink" title="二、开发平台"></a>二、开发平台</h3><h4 id="2-1-开发工具"><a href="#2-1-开发工具" class="headerlink" title="2.1 开发工具"></a>2.1 开发工具</h4><p>以下为扩展开发所需工具，可以在下面的两上网站下载和获取到帮助信息：<br><a href="https://addons.mozilla.org/extensions/?application=firefox" target="_blank" rel="noopener">https://addons.mozilla.org/extensions/?application=firefox</a><br><a href="http://www.extensionsmirror.nl/" target="_blank" rel="noopener">http://www.extensionsmirror.nl/</a></p><h4 id="2-2-配置环境变量"><a href="#2-2-配置环境变量" class="headerlink" title="2.2 配置环境变量"></a>2.2 配置环境变量</h4><p>Firefox 是一个允许创建多个 Profile 的浏览器，不同的 Profile 被分别进行管理。由于在开发扩展时，我们希望一个 Profile 用来做开发，一个 Profile 用来测试扩展的发布版本。所以，我们要配置不同的 Profile 来满足这种要求。<br>操作系统 Proile 对应的目录<br>Windows 9x/Me C:\Windows\Application Data\Mozilla\Firefox\Profiles\&lt;Profile name&gt;\<br>Windows 9x/Me, alternate C:\Windows\Profiles\&lt;Windows login/user name&gt;\Application Data\Mozilla\Firefox\Profiles\&lt;Profile name&gt;\<br>Windows NT 4.x C:\Winnt\Profiles\&lt;Windows login/user name&gt;\Application Data\Mozilla\Firefox\Profiles\&lt;Profile name&gt;\<br>Windows 2000/XP C:\Documents and Settings\&lt;Windows login/user name&gt;\Application Data\Mozilla\Firefox\Profiles\&lt;Profile name&gt;\ 或<br>%APPDATA%\Mozilla\Firefox\Profiles\&lt;Profile name&gt;\<br>Unix ~/.mozilla/firefox/&lt;Profile name&gt;/<br>Mac OS X ~/Library/Mozilla/Firefox/Profiles/&lt;Profile name&gt;/ 或<br>~/Library/Application Support/Firefox/Profiles/&lt;Profile name&gt;/</p><p>一般把默认的 Profile 做为开发的 Profile，所以，我们不用做什么特殊的设置。你可以把上面提到的那些扩展，全部安装到此 Profile 下。<br>那么，我们还要创建一个新的 Profile 来完成扩展的安装，或者说是发布测试工作。通过下面的两个步骤，你可以实现这种需求。</p><p>首先，我们需要在命令行方式下，定位到 Firefox 的安装目录，通过运行<br>firefox -P<br>启动 Firefox 的 Profile 管理器窗口，建立一个负责测试安装的 Profile。当然，也可以建立更多的 Profile。<br>假设你建立了一个名为“test”的 Profile，想启用这个 Profile，你需要通过<br>set MOZ_NO_REMOTE=1<br>firefox -P test<br>这两行命令来启用这个非默认启动状态的 Profile。为了方便测试，这两条命令可以写成一个 Shell 脚本或做成一个批处理文件。<br>下面列出Profile几个需要更改的设置项。</p><p>通过在地址栏中键入 about:config，你可以打开 Mozilla 内置的配置界面，这样你就可以更改那些设置项的值。在更改完这些设置项之后，我们会在以后的开发中更加得心应手。</p></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://21ido.com../../2006/03/4090bf4b/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="猫大叔"><meta itemprop="description" content=""><meta itemprop="image" content="../../images/avatar.gif"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="猫大叔"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a class="post-title-link" href="../../2006/03/4090bf4b/" itemprop="url">用XUL练习做QQ界面</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2006-03-22 21:55:37" itemprop="dateCreated datePublished" datetime="2006-03-22T21:55:37+08:00">2006-03-22</time> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2018-05-16 14:47:35" itemprop="dateModified" datetime="2018-05-16T14:47:35+08:00">2018-05-16</time> </span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="../../categories/Web/" itemprop="url" rel="index"><span itemprop="name">Web</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><p><img src="/images/2006/03/22_2006-3-322401859_12723.gif" alt=""></p><p>本来只是想写写笔记，但记得很细，感觉更像是写教程，哈</p><p>第一个XUL的练习，很多属性还不了解，拼凑着弄，各个元素和样式的命名也乱来的，哈</p><p>你看得出下面图跟QQ的差别么，下面可是用XUL做的界面，点击这里<del><a href="/upload/2006-3-322278181.rar">下载源码</a></del>，用Firefox打开XUL文件即可</p></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://21ido.com../../2006/03/425f6509/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="猫大叔"><meta itemprop="description" content=""><meta itemprop="image" content="../../images/avatar.gif"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="猫大叔"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a class="post-title-link" href="../../2006/03/425f6509/" itemprop="url">XUL学习笔记(1)</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2006-03-21 23:24:39" itemprop="dateCreated datePublished" datetime="2006-03-21T23:24:39+08:00">2006-03-21</time> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2018-05-18 09:54:33" itemprop="dateModified" datetime="2018-05-18T09:54:33+08:00">2018-05-18</time> </span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="../../categories/Web/" itemprop="url" rel="index"><span itemprop="name">Web</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><p><img src="/images/2006/03/21_2006-3-322128327_12722.gif" alt=""></p><h3 id="一、XUL简介"><a href="#一、XUL简介" class="headerlink" title="一、XUL简介"></a>一、XUL简介</h3><p>XUL是&ldquo;XML 化的用户界面语言（XML User Interface Language）&rdquo;的缩写，跟XML一样是一种与平台无关性的语言，是用来描述用户界面的语言，现在被广泛用于Mozilla平台。Mozilla本身的界面就是用XUL进行描述的。</p><h4 id="1-1-XUL相关技术"><a href="#1-1-XUL相关技术" class="headerlink" title="1.1 XUL相关技术"></a>1.1 XUL相关技术</h4><p>XUL与以下技术相关：</p><p>对于扩展开发来说，必须掌握的技术有 XUL，CSS，DOM，XPCOM，JavaScipt，而对于 XBL，XPConnet，RDF 做简单了解即可。</p><h4 id="2-2-各相关技术的功能"><a href="#2-2-各相关技术的功能" class="headerlink" title="2.2 各相关技术的功能"></a>2.2 各相关技术的功能</h4><p>如果说CSS是控制网页界面的话，那XUL即是控制桌面应用程序界面的语言。</p><ol><li>CSS用来控制程序界面，利用CSS可以在界面加上一些效果，例如字体大小、边框、颜色等。当然，也有一些Mozilla独有的特性。</li><li>DOM 主要用来为 JavaScritp 提供一个 HTML/XML 的文档操作接口，并且，它也可以用来操作 CSS，对界面进行&ldquo;动态&rdquo;操作，如：按钮的禁止与否，动态装载数据等。可以看出，通过 DOM 接口，我们可以将程序的逻辑处理部分与界面表现部分有机的结合起来。</li><li>JavaScipt 是扩展开发的核心要求，它主要用来实现程序的业务逻辑描述。可以说，从网页下的 JavaScript 开发到扩展下的 JavaScript 开发，是一种由轻量级到重量级的转变。由于 JavaScript 语言只内置了几个与本地访问无关的对象，而对于桌面开发来说，显然不能满足要求。因为桌面开发需要访问大量的本地和网络资源，包括文件，剪贴板，Socket，浏览器本身等各种资源。而 XPCOM 为面向桌面的开发提供了这种可能。只有使用 XPCOM，我们的扩展才可以做出实用的功能，没有 XPCOM，本地与远程的资源整合可以说是不可能。</li></ol></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://21ido.com../../2006/03/21ca53d9/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="猫大叔"><meta itemprop="description" content=""><meta itemprop="image" content="../../images/avatar.gif"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="猫大叔"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a class="post-title-link" href="../../2006/03/21ca53d9/" itemprop="url">Blue Blog开发历程</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2006-03-20 23:41:03" itemprop="dateCreated datePublished" datetime="2006-03-20T23:41:03+08:00">2006-03-20</time> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2018-05-21 15:51:28" itemprop="dateModified" datetime="2018-05-21T15:51:28+08:00">2018-05-21</time> </span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="../../categories/Web/" itemprop="url" rel="index"><span itemprop="name">Web</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><p><img src="/images/2006/03/20_2006-3-321494776_12719.gif" alt=""></p><p>应该没人记得这个Banner吧，这是最初的博客，程序写于03年9月。</p><p>当时只是几个简单的页面，自己可以发发日记，如此而已。</p><p><img src="/images/2006/03/20_2006-3-321254079_12720.gif" alt=""></p><p>03年12月，把Blog跟论坛数据库整合一起，所有论坛注册用户均可发表日志。上面是当时的Banner。<br></p><div class="post-button text-center"><a class="btn" href="../../2006/03/21ca53d9/#更多" rel="contents">阅读全文 &raquo;</a></div></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://21ido.com../../2006/03/80cf8175/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="猫大叔"><meta itemprop="description" content=""><meta itemprop="image" content="../../images/avatar.gif"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="猫大叔"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a class="post-title-link" href="../../2006/03/80cf8175/" itemprop="url">体验蓝牙</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2006-03-19 23:36:06" itemprop="dateCreated datePublished" datetime="2006-03-19T23:36:06+08:00">2006-03-19</time> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2018-05-11 15:14:16" itemprop="dateModified" datetime="2018-05-11T15:14:16+08:00">2018-05-11</time> </span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="../../categories/Digital/" itemprop="url" rel="index"><span itemprop="name">Digital</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><p><img src="/images/2006/03/19_2006-3-320207923_12718.gif" alt=""></p><p>昨天把主板电容全换了，今天去修了内存，检测后说颗粒坏了，结果换了一颗，终于又回到1G内存的配置了</p><p>蓝牙耳机是三星的，很轻巧，配上蓝牙适配器，就可以当无线耳机用了，虽然音质不是很好，但想起可以一边在厨房洗碗在浴室洗衣服，一边听歌，也蛮不错的，无线真是方便，晚上试了一下，电池可以维持3小时，也算可以了。</p><p>看着烦心的事情一件件被干掉，心情真是爽，还是赶快刷牙睡觉，明天有好多事～～～</p></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://21ido.com../../2006/03/8e90e02c/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="猫大叔"><meta itemprop="description" content=""><meta itemprop="image" content="../../images/avatar.gif"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="猫大叔"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a class="post-title-link" href="../../2006/03/8e90e02c/" itemprop="url">妈，生日快乐！</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2006-03-17 14:18:57" itemprop="dateCreated datePublished" datetime="2006-03-17T14:18:57+08:00">2006-03-17</time> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2018-05-11 15:14:16" itemprop="dateModified" datetime="2018-05-11T15:14:16+08:00">2018-05-11</time> </span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="../../categories/Life/" itemprop="url" rel="index"><span itemprop="name">Life</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><p><img src="/images/2006/03/17_2006-3-318309835_12717.gif" alt=""></p><p>今天是老妈生日，先祝她生日快乐，身体健康！</p><p>最近很多琐碎事，先是主板爆电容，然后是FTP连不上，接着又是系统出了问题，总之N多烦心的事。</p><p>不过，一切都会好的，我很坚强！</p><p>我是金子，我要发光！</p></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://21ido.com../../2006/03/fc4b2fc/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="猫大叔"><meta itemprop="description" content=""><meta itemprop="image" content="../../images/avatar.gif"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="猫大叔"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a class="post-title-link" href="../../2006/03/fc4b2fc/" itemprop="url">Windows 2003 安装摘要</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2006-03-14 23:31:46" itemprop="dateCreated datePublished" datetime="2006-03-14T23:31:46+08:00">2006-03-14</time> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2018-05-11 15:14:16" itemprop="dateModified" datetime="2018-05-11T15:14:16+08:00">2018-05-11</time> </span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="../../categories/IT/" itemprop="url" rel="index"><span itemprop="name">IT</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><p><img src="/images/2006/03/14_2006-3-315853782_12716.gif" alt=""></p><p>一直用Windows2000的，这几天不晓得搞了什么东东，全部FTP都连不上，无奈之下只好重装，正好前几天刻了张Windows2003，记录下大致安装步骤。</p><ol><li>准备好驱动程序，防火墙、防毒软件，以及系统补丁，例如SP1</li><li>备份文件，例如【我的文档】、【收藏夹】、【Outlook】、输入法词库&hellip;&hellip;</li><li>网络中断，安装Windows2003</li><li>安装补丁（安装盘已经集成SP1，这步跳过）、驱动程序、防火墙和防毒软件（如果是服务器，请屏蔽掉端口，留几个Web、FTP、SQL、远程控制端口即可）</li><li>连接网络，Update系统，同时更新防火墙和防毒软件</li><li><p>安装应用程序</p><pre><code>Office、MSSQL、Macroeedia、Adobe之类，安装完后记得Update
</code></pre></li><li><p>我习惯把我的文档、收藏夹、[Quick Launch]之类目录放到D盘，这样一来C盘报废也不怕</p><pre><code>修改注册表 AppData/Favorites/Personal，或者用超级兔子也可以修改这些系统文件夹

大致在下面几个地方，最好F3查一下

HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Explorer\Shell Folders

HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Explorer\User Shell Folders

HKEY_USERS\S-1-5-21-3825453747-3422435210-596121274-500\Software\Microsoft\Windows\CurrentVersion\Explorer\Shell Folders

HKEY_USERS\S-1-5-21-3825453747-3422435210-596121274-500\Software\Microsoft\Windows\CurrentVersion\Explorer\User Shell Folders

修改AppData的话还要修改下面几处

HKEY_CURRENT_USER\Volatile Environment

HKEY_USERS\S-1-5-21-3825453747-3422435210-596121274-500\Volatile Environment
</code></pre></li><li><p>配置IIS和MSSQL</p><pre><code>Windows2003要将IIS【Web服务扩展】里面[Active Server Pages]设为允许，同时站点属性 &amp;gt;&amp;gt; 主目录 &amp;gt;&amp;gt; 配置 &amp;gt;&amp;gt; 选项 &amp;gt;&amp;gt; 启用父路径
</code></pre></li><li>配置各软件，根据使用习惯配置系统</li><li>清除临时文件，整理C盘，克隆一份</li></ol><p>PS：安装Flash8时遇到&ldquo;ISSCRIPT.MSI&rdquo;错误，正好论坛有篇帖子可以解决。<span style="line-height:15pt">**<a href="/bbs/a/a.asp?BoardID=350&amp;ID=11033&amp;q=1&amp;r=453">装Macromedia 8 套件，出现&ldquo;ISSCRIPT.MSI&rdquo;错误的完美解决办法</a></span></p><p>**<span style="line-height:15pt">之前用Mcafee的防火墙，到了Windows2003就装不了，郁闷ing…</span></p></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article></section><nav class="pagination"><a class="extend prev" rel="prev" href="../30/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="../../">1</a><span class="space">&hellip;</span><a class="page-number" href="../28/">28</a><a class="page-number" href="../29/">29</a><a class="page-number" href="../30/">30</a><span class="page-number current">31</span><a class="page-number" href="../32/">32</a><a class="page-number" href="../33/">33</a><a class="page-number" href="../34/">34</a><span class="space">&hellip;</span><a class="page-number" href="../40/">40</a><a class="extend next" rel="next" href="../32/"><i class="fa fa-angle-right" aria-label="下一页"></i></a></nav></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span> <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span> <span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div class="sidebar-inner"><section class="site-overview-wrap sidebar-panel sidebar-panel-active"><div class="site-overview"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><p class="site-author-name" itemprop="name">猫大叔</p><p class="site-description motion-element" itemprop="description">不想做鼓励师的前端狗不是好的程序猿</p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"><a href="../../archives/"><span class="site-state-item-count">400</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="../../categories/index.html"><span class="site-state-item-count">5</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="../../tags/index.html"><span class="site-state-item-count">378</span> <span class="site-state-item-name">标签</span></a></div></nav><div class="feed-link motion-element"><a href="../../atom.xml" rel="alternate"><i class="fa fa-rss"></i> RSS</a></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/think2cat" target="_blank" title="GitHub" rel="external nofollow"><i class="fa fa-fw fa-github"></i>GitHub</a> </span><span class="links-of-author-item"><a href="mailto:gavin2026@gmail.com" target="_blank" title="E-Mail" rel="external nofollow"><i class="fa fa-fw fa-envelope"></i>E-Mail</a> </span><span class="links-of-author-item"><a href="https://twitter.com/cat2run" target="_blank" title="Twitter" rel="external nofollow"><i class="fa fa-fw fa-twitter"></i>Twitter</a> </span><span class="links-of-author-item"><a href="https://www.facebook.com/gavin.kuo.50" target="_blank" title="FB Page" rel="external nofollow"><i class="fa fa-fw fa-facebook"></i>FB Page</a></span></div><div class="cc-license motion-element" itemprop="license"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" target="_blank" rel="external nofollow"><img src="../../images/cc-by-nc-sa.svg" alt="Creative Commons"></a></div></div></section></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright">&copy; 2003 &mdash; <span itemprop="copyrightYear">2018</span> <span class="with-love" id="animate"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">猫大叔</span></div><div class="powered-by">由 <a class="theme-link" target="_blank" rel="external nofollow" href="https://hexo.io" rel="external nofollow">Hexo</a> 强力驱动 v3.7.1</div><span class="post-meta-divider">|</span><div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" rel="external nofollow" href="https://github.com/theme-next/hexo-theme-next" rel="external nofollow">NexT.Mist</a> v6.2.0</div></div></footer><div class="back-to-top"><i class="fa fa-arrow-up"></i></div></div><script type="text/javascript">"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script type="text/javascript" src="../../lib/jquery/index.js?v=2.1.3"></script><script type="text/javascript" src="../../lib/velocity/velocity.min.js?v=1.2.1"></script><script type="text/javascript" src="../../lib/velocity/velocity.ui.min.js?v=1.2.1"></script><script type="text/javascript" src="../../js/src/utils.js?v=6.2.0"></script><script type="text/javascript" src="../../js/src/motion.js?v=6.2.0"></script><script type="text/javascript" src="../../js/src/bootstrap.js?v=6.2.0"></script><link rel="stylesheet" href="https://aimingoo.github.io/gitmint/style/default.css"><script src="https://aimingoo.github.io/gitmint/dist/gitmint.browser.js"></script><script type="text/javascript">// Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });</script></body></html>