<!DOCTYPE html><html class="theme-next mist use-motion" lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><script src="/lib/pace/pace.min.js?v=1.0.2"></script><link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css"><link href="/css/main.css?v=6.2.0" rel="stylesheet" type="text/css"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.2.0"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.2.0"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png}?v=6.2.0"><link rel="mask-icon" href="/images/logo.svg?v=6.2.0" color="#222"><script type="text/javascript" id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Mist",version:"6.2.0",sidebar:{position:"left",display:"post",offset:12,b2t:!1,scrollpercent:!1,onmobile:!1},fancybox:!1,fastclick:!1,lazyload:!1,tabs:!0,motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><meta name="description" content="不想做鼓励师的前端狗不是好的程序猿"><meta property="og:type" content="website"><meta property="og:title" content="猫大叔"><meta property="og:url" content="https://21ido.com/page/30/index.html"><meta property="og:site_name" content="猫大叔"><meta property="og:description" content="不想做鼓励师的前端狗不是好的程序猿"><meta property="og:locale" content="zh-CN"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="猫大叔"><meta name="twitter:description" content="不想做鼓励师的前端狗不是好的程序猿"><link rel="alternate" href="../../atom.xml" title="猫大叔" type="application/atom+xml"><link rel="canonical" href="https://21ido.com/page/30/"><script type="text/javascript" id="page.configurations">CONFIG.page={sidebar:""}</script><title>猫大叔 - 关注前端，热爱生活</title><script async src="https://www.googletagmanager.com/gtag/js?id=UA-1162524-4"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-1162524-4")</script><noscript><style type="text/css">.sidebar-inner,.use-motion .brand,.use-motion .collection-title,.use-motion .comments,.use-motion .menu-item,.use-motion .motion-element,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .logo,.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.logo-line-after i{right:initial}</style></noscript></head><body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN"><div class="container sidebar-position-left page-home"><div class="headband"></div><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">猫大叔</span> <span class="logo-line-after"><i></i></span></a></div><h1 class="site-subtitle" itemprop="description">关注前端，热爱生活</h1></div><div class="site-nav-toggle"><button aria-label="切换导航栏"><span class="btn-bar"></span> <span class="btn-bar"></span> <span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br>首页</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i><br>分类<span class="badge">5</span></a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i><br>标签<span class="badge">378</span></a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br>归档<span class="badge">400</span></a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i><br>关于</a></li><li class="menu-item menu-item-search"><a href="javascript:;" class="popup-trigger"><i class="menu-item-icon fa fa-search fa-fw"></i><br>搜索</a></li></ul><div class="site-search"><div class="popup search-popup local-search-popup"><div class="local-search-header clearfix"><span class="search-icon"><i class="fa fa-search"></i> </span><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span><div class="local-search-input-wrapper"><input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input"></div></div><div id="local-search-result"></div></div></div></nav></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><section id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://21ido.com../../2006/05/7198219f/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="猫大叔"><meta itemprop="description" content=""><meta itemprop="image" content="../../images/avatar.gif"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="猫大叔"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a class="post-title-link" href="../../2006/05/7198219f/" itemprop="url">计算容量为整数的分区</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2006-05-12 11:19:23" itemprop="dateCreated datePublished" datetime="2006-05-12T11:19:23+08:00">2006-05-12</time> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2018-05-22 17:29:16" itemprop="dateModified" datetime="2018-05-22T17:29:16+08:00">2018-05-22</time> </span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="../../categories/Flash/" itemprop="url" rel="index"><span itemprop="name">Flash</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><embed width="520" height="100" pluginspage="http://www.macromedia.com/go/getflashplayer" _cx="13758" _cy="2646" wmode="Window" play="false" loop quality="High" menu="true" scale="ShowAll" devicefont="0" embedmovie="0" seamlesstabbing="1" profile="0" profileport="0" mediawrapchecked="true" src="/images/2006/05/12_12761.swf" type="application/x-shockwave-flash" id="Player1248319081580" splayername="SWF" tplayername="SWF"><p>&nbsp;</p><p>早上实在无聊的慌，写了这么一个小东西，哈<br>MM的组件真是重量级啊，才用了2个组件就几百KB了，要找找其它组件了</p><p>下载：<a href="/images/2006/05/12_12761.swf">SWF</a> | <del><a href="/upload/2006-5-512643078.rar">FLA</a></del></p></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://21ido.com../../2006/05/7dc7cb4e/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="猫大叔"><meta itemprop="description" content=""><meta itemprop="image" content="../../images/avatar.gif"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="猫大叔"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a class="post-title-link" href="../../2006/05/7dc7cb4e/" itemprop="url">2026</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2006-05-04 02:40:32" itemprop="dateCreated datePublished" datetime="2006-05-04T02:40:32+08:00">2006-05-04</time> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2018-05-11 15:14:16" itemprop="dateModified" datetime="2018-05-11T15:14:16+08:00">2018-05-11</time> </span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="../../categories/Life/" itemprop="url" rel="index"><span itemprop="name">Life</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><p><img src="/images/2006/05/04_12760.gif" alt=""></p><p>偶尔有朋友问我2026的由来，今天摩托车刚好开到2026公里了，说下2026的事。</p><p>刚上网的时候，经常要注册登陆帐号，邮箱啦、BBS啦之类，假如选择的用户名已被注册，就会提示你尝试在用户名后面加99、1999、2000等数字，正好我当时座号是26，于是2000+26=2026，就出来了</p><p>不久后，爆发了CIH病毒，26号发作（病毒作者陈盈豪座号也是26），还真巧。就更喜欢这数字了。到了高中，当时给自己定了奋斗目标，期限是26岁。</p><p>我爷爷是26岁结婚，我老爸也是26岁结婚&middot;&middot;&middot;</p></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://21ido.com../../2006/05/673f9ad3/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="猫大叔"><meta itemprop="description" content=""><meta itemprop="image" content="../../images/avatar.gif"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="猫大叔"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a class="post-title-link" href="../../2006/05/673f9ad3/" itemprop="url">我就喜欢</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2006-05-02 23:57:21" itemprop="dateCreated datePublished" datetime="2006-05-02T23:57:21+08:00">2006-05-02</time> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2018-05-11 15:14:16" itemprop="dateModified" datetime="2018-05-11T15:14:16+08:00">2018-05-11</time> </span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="../../categories/Life/" itemprop="url" rel="index"><span itemprop="name">Life</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><p><img src="/images/2006/05/02_2006-5-54671217_12730.gif" alt=""><br>有人买名牌衣服，是为了节省挑选好质量的时间；有人买名牌，是为了面子。</p><p>有人吃麦当劳，是为了方便；而有人却觉得吃麦当劳粉有面子。。。</p><p>为什么喜欢桂花，因为它香；为什么喜欢西门子，因为好用；为什么喜欢AMD，因为快&hellip;&hellip;</p><p>难道其它花就不香，难道其它牌子电器就不好用，难道Intel就不快？</p><p>一般喜欢一件东西，肯定因为有某种特性，很特别的特性，可是有时，喜欢并不需要理由，就像爱一个人，需要理由么？</p><p>喜欢只是种感觉，有时候，喜欢就是喜欢，并不需要理由，并不用管别人怎么看，因为那份感觉，只属于你。</p><p>PS：菠萝派还是那么好吃，我就喜欢！</p></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://21ido.com../../2006/04/8c91055b/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="猫大叔"><meta itemprop="description" content=""><meta itemprop="image" content="../../images/avatar.gif"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="猫大叔"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a class="post-title-link" href="../../2006/04/8c91055b/" itemprop="url">计算某天是当月第几周</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2006-04-28 17:20:53" itemprop="dateCreated datePublished" datetime="2006-04-28T17:20:53+08:00">2006-04-28</time> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2018-05-21 16:11:48" itemprop="dateModified" datetime="2018-05-21T16:11:48+08:00">2018-05-21</time> </span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="../../categories/Flash/" itemprop="url" rel="index"><span itemprop="name">Flash</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><p>在网上看到这样文章，是用VBS写的，觉得有些麻烦，于是想自己写一个，才发现VBS本来就有类似的函数，于是很容易得实现了</p><figure class="highlight vbs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Function</span> weekOfMonth(myDate)</span><br><span class="line">   monthWeek = <span class="built_in">DatePart</span>(<span class="string">"ww"</span>,<span class="built_in">DateAdd</span>(<span class="string">"d"</span>,-<span class="built_in">day</span>(myDate)+<span class="number">1</span>,myDate)) <span class="comment">'取得该月1号是本年第几周</span></span><br><span class="line">   dayWeek = <span class="built_in">DatePart</span>(<span class="string">"ww"</span>,myDate) <span class="comment">'取得该日期是本年第几周</span></span><br><span class="line">   weekOfMonth = dayWeek - monthWeek + <span class="number">1</span></span><br><span class="line"><span class="keyword">End</span> <span class="keyword">Function</span></span><br></pre></td></tr></table></figure><p>返回是整数，可以这样调用：<br></p><figure class="highlight vbs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">MsgBox</span> weekOfMonth(<span class="string">"2006-8-20"</span>)</span><br></pre></td></tr></table></figure><p></p><p>写完觉得太简单了，再用Flash写一个，在Flash里面找不到关于周计算的函数，只能自己写算法了<br></p><div class="post-button text-center"><a class="btn" href="../../2006/04/8c91055b/#更多" rel="contents">阅读全文 &raquo;</a></div></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://21ido.com../../2006/04/28897a50/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="猫大叔"><meta itemprop="description" content=""><meta itemprop="image" content="../../images/avatar.gif"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="猫大叔"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a class="post-title-link" href="../../2006/04/28897a50/" itemprop="url">《交互设计之路》读后感</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2006-04-17 00:47:10" itemprop="dateCreated datePublished" datetime="2006-04-17T00:47:10+08:00">2006-04-17</time> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2018-05-11 15:14:16" itemprop="dateModified" datetime="2018-05-11T15:14:16+08:00">2018-05-11</time> </span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="../../categories/Life/" itemprop="url" rel="index"><span itemprop="name">Life</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><p><img src="/images/2006/04/17_2006-4-417806527_12729.gif" alt=""></p><pre><code>前几天大致数了一下，每天光点击确认对话框的次数就超过100次了。删除文件要确认、删邮件移邮件要确认、退出也要确认，电脑是人设计的，说白了就是设计软件的人不信任操作电脑的人，以至于每步操作都要再问你&amp;ldquo;真的要这样做么？&amp;rdquo;

我经常吃快餐，每次进去坐下来，服务员就会递来杯茶，我会说&amp;ldquo;白切鸡饭&amp;rdquo;，服务员记下来然后就走开了，没有多余的语言和动作，但如果把电脑上的情景套上去：

&amp;nbsp;
</code></pre><div style="border:1px solid #ccc;margin:5px 20px;padding:5px;background:#f3f3f3 none repeat scroll 0"><br>我：白切鸡饭<br><br>服务员：白切鸡饭？<br><br>我：是的<br><br>服务员：一份？<br><br>我：是的，请快点<br><br>服务员：在这吃？<br><br>我：是的</div><pre><code>实际上这样的情景是很少发生的，只有在听不清楚才会要确认一下，而且我一个人进去，如果要2份或打包我会特别交待，如果没有，那就是一份，这又涉及到软件的智能判断了，例如我在工商网上银行查帐，我帐户只绑定了一张卡，可是每次还要我选择查询哪张卡，而下拉框只有一个选择，这好比服务员问你&amp;ldquo;先生吃什么？&amp;rdquo;等你说要白切鸡饭时服务员才说&amp;ldquo;只剩下牛腩饭了，可以么？&amp;rdquo;这都是多余的，所以我经常对我的同事朋友说&amp;ldquo;不要把能一次说清楚的话分两次说！&amp;rdquo;

人与人之间的交互比去人与电脑，省事得多，因为人与人之间本来就存在一种信任，可是电脑却不信任人，为什么？一来是初期对初级用户电脑水平的不了解，二来是长期以来养成的习惯，就像保存BIOS就是F10&amp;gt;&amp;gt;Enter，删除文件就是Del&amp;gt;&amp;gt;Enter，这是一种习惯。

《交互设计之路》是我第一本在地铁上看完的书，因为之前看过些可用性设计的书和文章，这次的阅读并没有太大收获，不过这确实是本好书，建议从事IT业的都应该看一看，我们还有很长的路要走。

**附录：转载Alan Cooper《The Inmates are Running the Asylum》

《精神病人管理精神病院》国内中文译本作《软件创新之路－－冲破高技术营造的牢笼》观点摘要：**
</code></pre><div style="border:1px solid #ccc;margin:5px 20px;padding:5px;background:#f3f3f3 none repeat scroll 0"><br><br>1. 虽然电脑操作系统需要层次式文件系统，而使用的人则不必知道它。<br>2. ATM总是打出取款单据，大多数人都把它扔了，ATM附近总是凌乱一片。<br>3. 设计很糟的软件，其代价是不可估量的。<br>4. 他们做他们想做的事，设计与他们自己的交互。<br>5. 功能太多，它们共同协力设程序变得难以理解和使用。找不到需要的功能，因为它们埋藏在众多的其他免费功能之中。<br>6. 电视卫星系统，在前几次尝试后，我完全放弃了它，就像别人所做的那样。<br>7. 用户不必非要成为电脑文化人才能去使用企业应用中的电脑。<br>8. 大多数与我共过事的产品经理都宁肯交付失败产品也不冒延期的危险。<br>9. PalmPilot的成功归功于设计师专心致志，聚精汇神与目标用户，以及关注用户想要如愿以偿的实际东西。<br>10. 技术支持是软件难用的最昂贵的项目之一。微软每年要花八亿美元用在技术支持上。<br>11. 你使用铅笔，只以及好的方法进行设计，比使用任何数量的原型法设计要好得多。<br>12. 在我的电脑上，线索化消息与单独消息的比例约为50：1，却没有电子邮件程序能够识别和处理。<br>13. 日历程序的失败：大多上情况下，结束时间是不重要的，不需要的，不指定的，甚至预先不知道的，却要输入一个精确的时间。<br>14. 非浏览器程序为何需要进行安装的唯一理由是程序员经常以这样的方式来完成他们的工作，任何在浏览器中运行的程序必然地会牺牲其庞大的性能。<br>15. PhotoShop不记忆用户的图形文件放在何处，也不记忆他经常用它进行的典型工作。<br>16. 什么是期望的？什么是可能？什么是存活的？（设计，工程，商业）<br>17. 当她期望某些东西时，她会忠诚于它。<br>18. 通过满足莎丽的期望，可以使公司更持久，更强壮地成长起来并能领导业界。<br>19. 所有这些重大失策很容易击毙任何正常的公司，但是苹果对设计的运用时使Macintosh可期望地博得前所未闻的消费者忠诚度。<br>20. 让软件为用户服务。<br>21. 程序员对可能性的想象造成了软件中大量充斥着不必要或用户不想要的功能。<br>22. 工程师们会把编程效率看得比用户的需求更重要。<br>23. 因为他们错误地认为CPU是在超负荷地工作，其结果就是软件让用户超负荷工作。<br>24. 被愉悦的用户是极其有效<br></div></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://21ido.com../../2006/04/d5ef69c5/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="猫大叔"><meta itemprop="description" content=""><meta itemprop="image" content="../../images/avatar.gif"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="猫大叔"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a class="post-title-link" href="../../2006/04/d5ef69c5/" itemprop="url">《JavaScript权威指南》学习笔记(1)</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2006-04-10 00:32:30" itemprop="dateCreated datePublished" datetime="2006-04-10T00:32:30+08:00">2006-04-10</time> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2018-05-11 15:14:16" itemprop="dateModified" datetime="2018-05-11T15:14:16+08:00">2018-05-11</time> </span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="../../categories/Web/" itemprop="url" rel="index"><span itemprop="name">Web</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><p><img src="/images/2006/04/10_2006-4-410230953_12728.gif" alt=""></p><p>一直很想系统的学习下JS，这次有幸在公司借到本<strong>《JavaScript权威指南(第四版)》</strong>，看了1天，还不错，但借的终究要还，好书还是希望自己手头有的好，决定自己去买一本。原价99大洋，打折后也要七、八十，真的蛮贵，相比之下，第三版就便宜多了，淘宝上三十多块就可以买了，比第四版便宜了50大洋，不过正好明天发工资，干脆买第四版好了，毕竟<font color="#ff0000"><strong>书中自有黄金屋</strong></font>，知识带来的价值是远大于书本身的价格的。</p><h3 id="一、概述"><a href="#一、概述" class="headerlink" title="一、概述"></a>一、概述</h3><p>JavaScript是一种轻型的、解析型语言，具有面向对象能力。最先由Netscape开发，而并非SUN公司，但JavaScript和Java在语法上有很多相似之处。</p><p>JavaScript最新版是1.5，解析器有Mozilla组织维护，其中一个版本使用C语言编写，称为SpiderMonkey，另一个用Java编写，称为Rhino</p><h4 id="1-主要特性"><a href="#1-主要特性" class="headerlink" title="1.主要特性"></a>1.主要特性</h4><ol><li>控制文档外观和内容</li><li>对浏览器控制</li><li>与表单数据交互</li><li>与用户交互（通过定义事件例如submit、onclick）</li><li>读写cookie数据</li></ol><h4 id="2-安全性"><a href="#2-安全性" class="headerlink" title="2.安全性"></a>2.安全性</h4><p>JavaScript本身是无法读本地文件和执行网络操作，但可以利用XPCOM进行操作</p><h3 id="二、语法结构"><a href="#二、语法结构" class="headerlink" title="二、语法结构"></a>二、语法结构</h3><ol><li><p>**编码</p><pre><code>**JavaScript程序是用16位的Unicode字符集编写，可以表示地球上每一种书面语言
</code></pre></li><li><p>**大小写敏感</p><pre><code>**JavaScript和Java都是区分大小写的语言，例如HTML里面通常用onClick，但在JavaScript里面只能用onclick
</code></pre></li><li><p>**空白符</p><pre><code>**JavaScript会忽略程序中记号之间的空格、制表符和换行符，除非是字符串或正则表达式的一部分，但为了使代码容易阅读和理解，请合理使用制表符和换行符
</code></pre></li><li><p>**句末分号</p><pre><code>**跟C、C++、Java一样，JavaScript在语句末尾通常带有分号&amp;rdquo;;&amp;rdquo;，主要为了分割语句，但在JavaScript，如果语句位于不同行，分号可以省略，但推荐养成句末加分号的编程习惯
</code></pre></li><li><p>**注释</p><pre><code>**JavaScript跟C、C++、Java一样，支持使用&amp;rdquo;//&amp;rdquo;作为注释标记，也可以用&amp;rdquo;/*&amp;rdquo;和&amp;rdquo;*/&amp;rdquo;注释多行文本，但不能嵌套注释。
</code></pre></li><li><p>**识标符</p><pre><code>**用来命名变量和函数，或是某些循环的标签。识标符第一个字符必须使字母或下划线，在JavaScript1.1版本后可以使用 $ 作为第一个字符，但尽量避免使用美元字符，接下来的字符可以是字母、数字、下划线或美元符号
</code></pre></li><li><p>**保留字</p><pre><code>**以下的保留字不可以用作变量，函数名，对象名等，其中有的保留字是为以后**JavaScrip****扩展用的

**break delete function return typeof

case do if switch var

catch else in this void

continue false instanceof throw while

debugger finally new true with

default for null try

JavaScript还有一些未来保留字，这些字虽然现在没有用到JavaScrip语言中，但是将来有可能用到

**JavaScrip****未来保留字列表：**

abstract double goto native static

boolean enum implements package super

byte export import private synchronized

char extends int protected throws

class final interface public transient

const float long short volatile

此外，每个特定JavaScript嵌入的客户端或服务器端会有自己的全局属性，也不能作为识标符。

**其它避免使用的识标符

**arguments encodeURI Infinity Object String

Array Error isFinite parseFloat SyntaxError

Boonean escape iNaN parseInt TypeError

Date eval Math RangeError undefined

decodeURI EvalError NaN ReferenceError unescape

decodeURIomponent Function Number RegExp URIError
</code></pre></li></ol><h3 id="三、数据类型"><a href="#三、数据类型" class="headerlink" title="三、数据类型"></a>三、数据类型</h3><p>JavaScript支持基本数据类型－数字、文本字符串和布尔值，小数据类型null和undefined，复合型数据类型－函数、对象（数组、已命名的值的无序集合）。</p><h4 id="1-数字"><a href="#1-数字" class="headerlink" title="1.数字"></a>1.数字</h4><ol><li><strong>整型</strong>，包括-253和253之间所有整数（包括-253和253），但是要注意JavaScript中某些整数运算（例如逐位运算符）范围从-231和231-1</li><li><strong>八进制和十六进制</strong>，十六进制以&rdquo;0X&rdquo;或&rdquo;0x&rdquo;开头，例如 0xfff、0XCAE3；八进制以0开头，例如0377</li><li><p><strong>浮点型</strong>，最大可以到&plusmn;1.7976931348623157x10308，最小到&plusmn;5x10-324</p><pre><code>可以采用传统科学记数法，例如3.14、.333，也可以使用指数记数法，例如6.02e23、1.43E-32
</code></pre></li><li><strong>特殊数值</strong>，大于浮点值所能表示范围时JavaScript输出Infinity，当负无穷大比所能表示负值还小时输出-Infinity，另外还有非数字特殊值NaN，例如一个数除与0将返回NaN，它和任何数值不相等，包括本身，可以使用isNaN()函数来检测这个值</li><li><p><strong>使用方法</strong></p><pre><code>sine_of_x = Math.sin(x);

var x = 26;
</code></pre></li></ol><h4 id="2-字符串"><a href="#2-字符串" class="headerlink" title="2.字符串"></a>2.字符串</h4><p>有单引号或双引号括起来的unicode字符序列，但字符串包括单引号或双引号时，要用反斜线符号()进行转移，例如&rdquo;O&rsquo;Reilly&rsquo;s&rdquo;应写为&rdquo;O\&rsquo;Reilly\&rsquo;s&rdquo;</p><p><strong>JavaScript**</strong>转移序列 **</p><p>\0 NUL字符</p><p>\b 退格</p><p>\f 走纸换页</p><p>\n 换行</p><p>\r 回车</p><p>\t 水平制表符</p><p>\v 垂直制表符</p><p>\’ 单引号</p><p>\&quot; 双引号</p><p>\ 反斜杠变量</p><p>\xXX 2位十六进制指定Lation-1字符</p><p>\uXXXX 4位十六进制指定Unicode字符</p><p><strong>使用方法</strong></p><p>Msg = &ldquo;Hello,&rdquo; + &ldquo;world&rdquo;;</p><p>myColor = &ldquo;Blue&rdquo;</p><h4 id="3-布尔值"><a href="#3-布尔值" class="headerlink" title="3.布尔值"></a>3.布尔值</h4><p>数据类型只有true和false，表示真或假，常用在if 判断。</p><p>有时可以看作on和off，0和1</p><h4 id="4-函数"><a href="#4-函数" class="headerlink" title="4.函数"></a>4.函数</h4><p>函数是一个可执行的JavaScript代码段，定义一次就可以被多次调用执行。</p><p>JavaScript中的函数是一个真正的数据类型，所以函数可以被存储在变量、数组和对象中，还可以作为参数传递给其它函数。</p><h4 id="5-对象"><a href="#5-对象" class="headerlink" title="5.对象"></a>5.对象</h4><p>对象是已命名的数据集合，数据通常作为对象的属性来引用。</p><p>例如var a = image.width;</p><p>对象里面包含方法，例如 document.write(&ldquo;Hello, world&rdquo;)</p><h4 id="6-数组"><a href="#6-数组" class="headerlink" title="6.数组"></a>6.数组</h4><p>JavaScript中数组下标值是从0开始的，例如a[3]表示a数组中第四个元素</p><p>使用方法：</p><p>var a = new Array(3); //创建3个元素的数组</p><p>a[0] = 3;</p><p>a[1] = true;</p><p>a[2] = &ldquo;hello&rdquo;;</p><p>也可以这样创建</p><p>var a = new Array(3, true, &ldquo;hello&rdquo;);</p><h3 id="四、变量"><a href="#四、变量" class="headerlink" title="四、变量"></a>四、变量</h3><p>变量是一个和数值相关的名字。</p><h4 id="1-类型"><a href="#1-类型" class="headerlink" title="1.类型"></a>1.类型</h4><p>在C、C++、Java中，变量只能存放所声明的数据类型，但在JavaScript中，变量是无类型的，你可以先把一个数值赋给变量，然后再把字符串赋给它，这是合法的。</p><p>基本类型和引用类型，&hellip;&hellip;</p><h4 id="2-声明"><a href="#2-声明" class="headerlink" title="2.声明"></a>2.声明</h4><p>使用一个变量之前必须先声明，如果没有指定初始值那变量初始值是undefined，重复使用var声明同一个变量是合法的。</p><p>如果给一个未声明的变量赋值，JavaScript会隐式声明该变量，并且该变量会被创建为全局变量，但如果程序读取一个未声明的变量，将会报错。</p></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://21ido.com../../2006/04/5f65db97/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="猫大叔"><meta itemprop="description" content=""><meta itemprop="image" content="../../images/avatar.gif"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="猫大叔"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a class="post-title-link" href="../../2006/04/5f65db97/" itemprop="url">设计师教程序员做开发</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2006-04-05 23:41:50" itemprop="dateCreated datePublished" datetime="2006-04-05T23:41:50+08:00">2006-04-05</time> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2018-05-14 13:44:36" itemprop="dateModified" datetime="2018-05-14T13:44:36+08:00">2018-05-14</time> </span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="../../categories/Life/" itemprop="url" rel="index"><span itemprop="name">Life</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><p><img src="/images/2006/04/05_2006-4-46715492_12727.gif" alt=""></p><p>一个软件项目，要做升级，主要就是增加删除某些功能，美化客户端的界面，一个做界面的设计人员，算是小头目吧，对一个程序员说</p><ol><li>不要的东西例如某些菜单、工具栏，用CSS隐藏就好，而不是注释掉；（N多菜单下来，虽然外表看不见但还在消耗系统资源，而且控件本来就有hidden属性，干嘛用CSS？）</li><li>每个界面都建个资源文件；（软件有很多共用的资源，放在一个文件，其它文件都调用这个资源文件）</li><li>临时测试用的文本也写进资源文件；（这样就有N多垃圾丢在里面，以后维护人员就惨了）</li><li>&hellip;&hellip;</li></ol><p>那个程序员就是偶啦，真是郁闷，为什么一个写代码用空格做缩进的人可以做头头，而且是个MM，逻辑能力不是很强滴说，唉，跟她谈了很多软件工程的东西，她就是不听，因为她是头，她说了算，^&amp;@$^%#%$E^%#$!</p><p>这样下来，好好一个软件因为规划不好，肯定是问题多多的，甚至可能是一堆很美丽的垃圾，以后要扩充功能和维护就难了。</p></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://21ido.com../../2006/04/4867d35e/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="猫大叔"><meta itemprop="description" content=""><meta itemprop="image" content="../../images/avatar.gif"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="猫大叔"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a class="post-title-link" href="../../2006/04/4867d35e/" itemprop="url">XUL+CSS做弹出菜单</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2006-04-04 23:06:49" itemprop="dateCreated datePublished" datetime="2006-04-04T23:06:49+08:00">2006-04-04</time> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2018-05-21 16:05:44" itemprop="dateModified" datetime="2018-05-21T16:05:44+08:00">2018-05-21</time> </span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="../../categories/Web/" itemprop="url" rel="index"><span itemprop="name">Web</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><p><img src="/images/2006/04/04_12758_12758.gif" alt=""></p><p>很多软件都用这种效果，使用的时候很简单，给<popup>标签加上css定义就可以了，如下面代码所示<br><div class="post-button text-center"><a class="btn" href="../../2006/04/4867d35e/#更多" rel="contents">阅读全文 &raquo;</a></div></popup></p></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://21ido.com../../2006/04/80e9884a/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="猫大叔"><meta itemprop="description" content=""><meta itemprop="image" content="../../images/avatar.gif"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="猫大叔"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a class="post-title-link" href="../../2006/04/80e9884a/" itemprop="url">U盘夭折了</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2006-04-01 22:31:13" itemprop="dateCreated datePublished" datetime="2006-04-01T22:31:13+08:00">2006-04-01</time> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2018-05-13 19:54:48" itemprop="dateModified" datetime="2018-05-13T19:54:48+08:00">2018-05-13</time> </span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="../../categories/Digital/" itemprop="url" rel="index"><span itemprop="name">Digital</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><p><img src="/images/2006/04/01_2006-4-42762705_12726.gif" alt=""></p><p>爱国者智慧棒，04年底买的，05年底坏的，但只是外壳坏了，电路板是好的，一直放抽屉，今天天气不错，拿去维修部，说是过了保修期，而且是人为损坏，修理至少100大洋，天哪，一个杂牌的256M才80元，没修，买了瓶502胶，回家了</p><p>晚上粘了一下，估计是电路板被胶水腐蚀，测试的时候完全没反应了</p><p>我挺喜欢这U盘的，很小，每天都放钱包随身带着。完了，才用了一年，真可惜，以后带Mp3好了，哈</p><p>U盘啊U盘，我不会忘记你对我的贡献的，我会永远记住你的，安息吧，阿门～～～</p></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://21ido.com../../2006/04/e88dddc7/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="猫大叔"><meta itemprop="description" content=""><meta itemprop="image" content="../../images/avatar.gif"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="猫大叔"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a class="post-title-link" href="../../2006/04/e88dddc7/" itemprop="url">决定以后上下班都搭地铁</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2006-04-01 00:33:22" itemprop="dateCreated datePublished" datetime="2006-04-01T00:33:22+08:00">2006-04-01</time> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2018-05-11 15:14:16" itemprop="dateModified" datetime="2018-05-11T15:14:16+08:00">2018-05-11</time> </span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="../../categories/Life/" itemprop="url" rel="index"><span itemprop="name">Life</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><p><img src="/images/2006/04/01_2006-4-41466514_12725.gif" alt=""></p><p>晚上回来算了一下，每天上班公车 vs. 地铁</p><p>走5分钟去搭公车，近30分钟的车程，下车后5分钟到达公司</p><p>走10分钟塔地铁，12分钟到站，走10分钟到公司</p><p>这样搭地铁比公车节省了近10分钟，而且不会塞车，不会因为司机老急煞而搞得头晕晕，但是地铁比公车贵了8毛5，这样一个月下来就多了34元，不过比起挤公车的时间、精神损失(遇上小偷还可能物质损失)，那点钱也不算什么了，就当少喝瓶红酒好了</p><p>鼠标又没电了，这次的电池维持了3个多月，挺省电，不错滴说</p><p>鼠标是04年底买的，￥450元，挺奢侈的东西，下面的鼠标垫是1030简版，全国统一价￥58元</p><p>现在是4月1日了，愚人节～～～我不骗人，大家也别骗我，别伤害偶弱小滴心灵。</p></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article></section><nav class="pagination"><a class="extend prev" rel="prev" href="../29/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="../../">1</a><span class="space">&hellip;</span><a class="page-number" href="../27/">27</a><a class="page-number" href="../28/">28</a><a class="page-number" href="../29/">29</a><span class="page-number current">30</span><a class="page-number" href="../31/">31</a><a class="page-number" href="../32/">32</a><a class="page-number" href="../33/">33</a><span class="space">&hellip;</span><a class="page-number" href="../40/">40</a><a class="extend next" rel="next" href="../31/"><i class="fa fa-angle-right" aria-label="下一页"></i></a></nav></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span> <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span> <span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div class="sidebar-inner"><section class="site-overview-wrap sidebar-panel sidebar-panel-active"><div class="site-overview"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><p class="site-author-name" itemprop="name">猫大叔</p><p class="site-description motion-element" itemprop="description">不想做鼓励师的前端狗不是好的程序猿</p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"><a href="../../archives/"><span class="site-state-item-count">400</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="../../categories/index.html"><span class="site-state-item-count">5</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="../../tags/index.html"><span class="site-state-item-count">378</span> <span class="site-state-item-name">标签</span></a></div></nav><div class="feed-link motion-element"><a href="../../atom.xml" rel="alternate"><i class="fa fa-rss"></i> RSS</a></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/think2cat" target="_blank" title="GitHub" rel="external nofollow"><i class="fa fa-fw fa-github"></i>GitHub</a> </span><span class="links-of-author-item"><a href="mailto:gavin2026@gmail.com" target="_blank" title="E-Mail" rel="external nofollow"><i class="fa fa-fw fa-envelope"></i>E-Mail</a> </span><span class="links-of-author-item"><a href="https://twitter.com/cat2run" target="_blank" title="Twitter" rel="external nofollow"><i class="fa fa-fw fa-twitter"></i>Twitter</a> </span><span class="links-of-author-item"><a href="https://www.facebook.com/gavin.kuo.50" target="_blank" title="FB Page" rel="external nofollow"><i class="fa fa-fw fa-facebook"></i>FB Page</a></span></div><div class="cc-license motion-element" itemprop="license"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" target="_blank" rel="external nofollow"><img src="../../images/cc-by-nc-sa.svg" alt="Creative Commons"></a></div></div></section></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright">&copy; 2003 &mdash; <span itemprop="copyrightYear">2018</span> <span class="with-love" id="animate"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">猫大叔</span></div><div class="powered-by">由 <a class="theme-link" target="_blank" rel="external nofollow" href="https://hexo.io" rel="external nofollow">Hexo</a> 强力驱动 v3.7.1</div><span class="post-meta-divider">|</span><div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" rel="external nofollow" href="https://github.com/theme-next/hexo-theme-next" rel="external nofollow">NexT.Mist</a> v6.2.0</div></div></footer><div class="back-to-top"><i class="fa fa-arrow-up"></i></div></div><script type="text/javascript">"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script type="text/javascript" src="../../lib/jquery/index.js?v=2.1.3"></script><script type="text/javascript" src="../../lib/velocity/velocity.min.js?v=1.2.1"></script><script type="text/javascript" src="../../lib/velocity/velocity.ui.min.js?v=1.2.1"></script><script type="text/javascript" src="../../js/src/utils.js?v=6.2.0"></script><script type="text/javascript" src="../../js/src/motion.js?v=6.2.0"></script><script type="text/javascript" src="../../js/src/bootstrap.js?v=6.2.0"></script><link rel="stylesheet" href="https://aimingoo.github.io/gitmint/style/default.css"><script src="https://aimingoo.github.io/gitmint/dist/gitmint.browser.js"></script><script type="text/javascript">// Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });</script></body></html>